spark-submit --driver-memory 15g MovieLensALS.py --spark-executor-memory 15g --local-threads 8 --num-partitions 7 --checkpoint-dir /home/maxikov/spark_dir --temp-dir /home/maxikov/spark_dir --persist-dir /home/maxikov/product_regression_all_regression_tree_rank_1_depth_8.state --data-path datasets/ml-20m --movies-file datasets/ml-20m/ml-20m.imdb.medium.csv --tvtropes-file datasets/dbtropes/tropes.csv --rank 1 --lmbda 0.01 --num-iter 300 --predict-product-features --metadata-sources years genres average_rating imdb_keywords imdb_producer imdb_director tags tvtropes --drop-rare-features 250 --drop-rare-movies 50 --cross-validation 70 --regression-model regression_tree --nbins 32 --max-depth 8 --features-trim-percentile 0
2017-05-17 15:58:42,251 - __main__ - DEBUG - rank: 1, lmbda: 0.01, num_iter: 300, num_partitions: 7
2017-05-17 15:58:42,251 - __main__ - DEBUG - data_path: datasets/ml-20m, checkpoint_dir: /home/maxikov/spark_dir
2017-05-17 15:58:42,251 - __main__ - DEBUG - Temp dir: /home/maxikov/spark_dir
2017-05-17 15:58:42,251 - __main__ - DEBUG - local_threads: 8
2017-05-17 15:58:42,251 - __main__ - DEBUG - spark_executor_memory: 15g
2017-05-17 15:58:42,251 - __main__ - DEBUG - regression_model: regression_tree
2017-05-17 15:58:42,251 - __main__ - DEBUG - nbins: 32
2017-05-17 15:58:42,251 - __main__ - DEBUG - regression_users: False
2017-05-17 15:58:42,251 - __main__ - DEBUG - predict_product_features: True
2017-05-17 15:58:42,251 - __main__ - DEBUG - metadata_sources: ['years', 'genres', 'average_rating', 'imdb_keywords', 'imdb_producer', 'imdb_director', 'tags', 'tvtropes']
2017-05-17 15:58:42,251 - __main__ - DEBUG - movies_file: datasets/ml-20m/ml-20m.imdb.medium.csv
2017-05-17 15:58:42,251 - __main__ - DEBUG - cross_validation: 70
2017-05-17 15:58:42,251 - __main__ - DEBUG - tvtropes_file: datasets/dbtropes/tropes.csv
2017-05-17 15:58:42,251 - __main__ - DEBUG - features_trim_percentile: 0
2017-05-17 15:58:42,251 - __main__ - DEBUG - drop_missing_movies: False
2017-05-17 15:58:42,251 - __main__ - DEBUG - drop_rare_features: 250
2017-05-17 15:58:42,251 - __main__ - DEBUG - filter_data_set: 10
2017-05-17 15:58:42,251 - __main__ - DEBUG - persist_dir: /home/maxikov/product_regression_all_regression_tree_rank_1_depth_8.state, override_args: False
2017-05-17 15:58:42,252 - __main__ - DEBUG - drop_rare_movies: 50
2017-05-17 15:58:42,252 - __main__ - DEBUG - normalize: False
2017-05-17 15:58:42,252 - __main__ - DEBUG - max_depth: 8
2017-05-17 15:58:43,512 - __main__ - DEBUG - msep: ,
2017-05-17 15:58:43,513 - __main__ - DEBUG - Loading ratings
2017-05-17 15:58:51,494 - __main__ - DEBUG - Done in 7.981236 seconds
2017-05-17 15:58:51,494 - __main__ - DEBUG - Loading movies
2017-05-17 15:58:52,651 - __main__ - DEBUG - Done in 1.156507 seconds
2017-05-17 15:58:52,651 - __main__ - DEBUG - 26804 movies loaded
2017-05-17 16:00:09,145 - __main__ - DEBUG - 19912669 records in the training set
2017-05-17 16:00:17,451 - __main__ - DEBUG - 26284 unique movies in the training set
2017-05-17 16:00:17,451 - __main__ - DEBUG - Started internal_feature_predictor
2017-05-17 16:00:17,452 - __main__ - DEBUG - Trying to load previous results
2017-05-17 16:00:17,452 - __main__ - DEBUG - Loading /home/maxikov/product_regression_all_regression_tree_rank_1_depth_8.state/results.pkl
2017-05-17 16:00:17,472 - __main__ - DEBUG - 1 features already processed: {0: {'randomized_mean_error_baseline_test': 0.555261088888522, 'randomized_rec_eval_test': {'preds_histogram': ([0.0, 0.16666666666666666, 0.3333333333333333, 0.5, 0.6666666666666666, 0.8333333333333333, 1.0, 1.1666666666666665, 1.3333333333333333, 1.5, 1.6666666666666665, 1.8333333333333333, 2.0, 2.1666666666666665, 2.333333333333333, 2.5, 2.6666666666666665, 2.833333333333333, 3.0, 3.1666666666666665, 3.333333333333333, 3.5, 3.6666666666666665, 3.833333333333333, 4.0, 4.166666666666666, 4.333333333333333, 4.5, 4.666666666666666, 4.833333333333333, 5.0, 5.166666666666666, 5.333333333333333, 5.5], [0, 9, 107, 155, 672, 3301, 4953, 11120, 23015, 17744, 12362, 22496, 43878, 75619, 110992, 156568, 212038, 267843, 318464, 360824, 382381, 374163, 336568, 275271, 201880, 131312, 77067, 41098, 20473, 9599, 4514, 2061, 922]), 'errors_histogram': ([-5.5, -5.166666666666667, -4.833333333333333, -4.5, -4.166666666666667, -3.8333333333333335, -3.5, -3.166666666666667, -2.8333333333333335, -2.5, -2.166666666666667, -1.8333333333333335, -1.5, -1.166666666666667, -0.8333333333333339, -0.5, -0.16666666666666696, 0.16666666666666607, 0.5, 0.833333333333333, 1.166666666666666, 1.5, 1.833333333333333, 2.166666666666666, 2.5, 2.833333333333332, 3.166666666666666, 3.5, 3.833333333333332, 4.166666666666666, 4.5, 4.833333333333332, 5.166666666666666, 5.5], [0, 0, 0, 0, 13, 146, 2195, 14620, 22446, 12385, 20516, 47629, 162063, 292830, 581067, 626805, 782650, 471670, 244984, 171165, 29265, 11679, 4794, 1132, 153, 17, 4, 1, 0, 0, 0, 0, 0]), 'r2': -0.6589145549507063, 'mean_err': -0.22629586486153552, 'sq_errors_histogram': ([0.0, 0.9166666666666666, 1.8333333333333333, 2.75, 3.6666666666666665, 4.583333333333333, 5.5, 6.416666666666666, 7.333333333333333, 8.25, 9.166666666666666, 10.083333333333332, 11.0, 11.916666666666666, 12.833333333333332, 13.75, 14.666666666666666, 15.583333333333332, 16.5, 17.416666666666664, 18.333333333333332, 19.25, 20.166666666666664, 21.083333333333332, 22.0, 22.916666666666664, 23.833333333333332, 24.75, 25.666666666666664, 26.583333333333332, 27.5, 28.416666666666664, 29.333333333333332, 30.25], [2955584, 334621, 111356, 27960, 16350, 8103, 8459, 11663, 11784, 8132, 4027, 1453, 502, 156, 57, 9, 7, 4, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]), 'rmse': 0.7382887194992603, 'mean_abs_err': 0.5552610888885251, 'obs_histogram': ([0.0, 0.16666666666666666, 0.3333333333333333, 0.5, 0.6666666666666666, 0.8333333333333333, 1.0, 1.1666666666666665, 1.3333333333333333, 1.5, 1.6666666666666665, 1.8333333333333333, 2.0, 2.1666666666666665, 2.333333333333333, 2.5, 2.6666666666666665, 2.833333333333333, 3.0, 3.1666666666666665, 3.333333333333333, 3.5, 3.6666666666666665, 3.833333333333333, 4.0, 4.166666666666666, 4.333333333333333, 4.5, 4.666666666666666, 4.833333333333333, 5.0, 5.166666666666666, 5.333333333333333, 5.5], [0, 0, 27, 58, 71, 162, 518, 952, 1763, 3231, 6734, 12531, 22007, 37891, 62369, 95084, 136009, 184959, 243278, 307432, 368844, 413193, 422884, 385643, 309623, 218970, 135277, 73255, 34587, 14441, 5394, 1908, 679]), 'explained_variance': 0.46187129782453645, 'mre': 0.5552610888885252, 'mrae': 0.1585786324528359, 'abs_errors_histogram': ([0.0, 0.16666666666666666, 0.3333333333333333, 0.5, 0.6666666666666666, 0.8333333333333333, 1.0, 1.1666666666666665, 1.3333333333333333, 1.5, 1.6666666666666665, 1.8333333333333333, 2.0, 2.1666666666666665, 2.333333333333333, 2.5, 2.6666666666666665, 2.833333333333333, 3.0, 3.1666666666666665, 3.333333333333333, 3.5, 3.6666666666666665, 3.833333333333333, 4.0, 4.166666666666666, 4.333333333333333, 4.5, 4.666666666666666, 4.833333333333333, 5.0, 5.166666666666666, 5.333333333333333, 5.5], [782650, 641916, 456559, 450873, 375178, 313361, 150634, 106200, 85128, 40339, 18969, 15084, 10226, 6399, 7118, 10405, 12194, 9644, 4993, 1719, 480, 130, 17, 9, 4, 0, 0, 0, 0, 0, 0, 0, 0])}, 'randomized_mean_error_baseline': 0.6122747979449046, 'replaced_mean_error_baseline_test': 0.08359846354323187, 'regression_evaluation_ht_test': {'preds_histogram': ([0.2532430589199066, 0.3197931448618571, 0.3863432308038076, 0.45289331674575806, 0.5194434026877086, 0.585993488629659, 0.6525435745716095, 0.71909366051356, 0.7856437464555105, 0.8521938323974609, 0.9187439183394115, 0.9852940042813619, 1.0518440902233124, 1.118394176165263, 1.1849442621072135, 1.2514943480491638, 1.3180444339911144, 1.384594519933065, 1.4511446058750153, 1.5176946918169658, 1.5842447777589164, 1.6507948637008667, 1.7173449496428173, 1.7838950355847678, 1.8504451215267181, 1.9169952074686687, 1.9835452934106192, 2.0500953793525696, 2.1166454652945204, 2.1831955512364707, 2.249745637178421, 2.316295723120372, 2.382845809062322, 2.4493958950042725], [1, 0, 0, 2, 0, 2, 0, 3, 1, 1, 5, 5, 12, 22, 28, 33, 40, 68, 75, 109, 116, 148, 151, 162, 173, 166, 165, 81, 41, 16, 1, 2, 2]), 'errors_histogram': ([-2.4493958950042725, -2.3009476589434072, -2.1524994228825425, -2.0040511868216777, -1.8556029507608125, -1.7071547146999475, -1.5587064786390825, -1.4102582425782175, -1.2618100065173525, -1.1133617704564875, -0.9649135343956226, -0.8164652983347576, -0.6680170622738926, -0.5195688262130276, -0.3711205901521626, -0.22267235409129782, -0.0742241180304326, 0.0742241180304326, 0.22267235409129738, 0.37112059015216214, 0.5195688262130274, 0.6680170622738926, 0.8164652983347573, 0.9649135343956221, 1.1133617704564873, 1.2618100065173525, 1.4102582425782173, 1.558706478639082, 1.7071547146999473, 1.8556029507608125, 2.004051186821677, 2.152499422882542, 2.3009476589434072, 2.4493958950042725], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1631, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]), 'r2': 1.0, 'mean_err': 0.0, 'sq_errors_histogram': ([0.0, 0.18180425001405398, 0.36360850002810796, 0.5454127500421619, 0.7272170000562159, 0.9090212500702699, 1.0908255000843239, 1.2726297500983779, 1.4544340001124318, 1.6362382501264858, 1.8180425001405398, 1.9998467501545938, 2.1816510001686478, 2.3634552501827018, 2.5452595001967557, 2.7270637502108097, 2.9088680002248637, 3.0906722502389177, 3.2724765002529717, 3.4542807502670256, 3.6360850002810796, 3.8178892502951336, 3.9996935003091876, 4.181497750323242, 4.3633020003372955, 4.545106250351349, 4.7269105003654035, 4.908714750379458, 5.0905190003935115, 5.272323250407565, 5.454127500421619, 5.635931750435674, 5.817736000449727, 5.999540250463781], [1631, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]), 'rmse': 0.0, 'mean_abs_err': 0.0, 'obs_histogram': ([0.2532430589199066, 0.3197931448618571, 0.3863432308038076, 0.45289331674575806, 0.5194434026877086, 0.585993488629659, 0.6525435745716095, 0.71909366051356, 0.7856437464555105, 0.8521938323974609, 0.9187439183394115, 0.9852940042813619, 1.0518440902233124, 1.118394176165263, 1.1849442621072135, 1.2514943480491638, 1.3180444339911144, 1.384594519933065, 1.4511446058750153, 1.5176946918169658, 1.5842447777589164, 1.6507948637008667, 1.7173449496428173, 1.7838950355847678, 1.8504451215267181, 1.9169952074686687, 1.9835452934106192, 2.0500953793525696, 2.1166454652945204, 2.1831955512364707, 2.249745637178421, 2.316295723120372, 2.382845809062322, 2.4493958950042725], [1, 0, 0, 2, 0, 2, 0, 3, 1, 1, 5, 5, 12, 22, 28, 33, 40, 68, 75, 109, 116, 148, 151, 162, 173, 166, 165, 81, 41, 16, 1, 2, 2]), 'explained_variance': 0.0709201386175663, 'mre': 0.0, 'mrae': 0.0, 'abs_errors_histogram': ([0.0, 0.0742241180304325, 0.148448236060865, 0.2226723540912975, 0.29689647212173, 0.3711205901521625, 0.445344708182595, 0.5195688262130275, 0.59379294424346, 0.6680170622738925, 0.742241180304325, 0.8164652983347574, 0.89068941636519, 0.9649135343956224, 1.039137652426055, 1.1133617704564873, 1.18758588848692, 1.2618100065173525, 1.336034124547785, 1.4102582425782173, 1.48448236060865, 1.5587064786390825, 1.632930596669515, 1.7071547146999473, 1.78137883273038, 1.8556029507608125, 1.9298270687912449, 2.0040511868216773, 2.07827530485211, 2.1524994228825425, 2.2267235409129746, 2.3009476589434072, 2.37517177697384, 2.4493958950042725], [1631, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0])}, 'regression_evaluation': {'preds_histogram': ([0.3016003370285034, 0.36731045173876214, 0.43302056644902087, 0.49873068115927954, 0.5644407958695383, 0.630150910579797, 0.6958610252900557, 0.7615711400003145, 0.8272812547105731, 0.8929913694208318, 0.9587014841310906, 1.0244115988413491, 1.090121713551608, 1.1558318282618667, 1.2215419429721255, 1.2872520576823843, 1.3529621723926428, 1.4186722871029016, 1.4843824018131602, 1.550092516523419, 1.6158026312336777, 1.6815127459439363, 1.747222860654195, 1.8129329753644539, 1.8786430900747124, 1.9443532047849712, 2.01006331949523, 2.0757734342054888, 2.1414835489157475, 2.207193663626006, 2.272903778336265, 2.3386138930465235, 2.4043240077567822, 2.470034122467041], [2, 0, 0, 1, 4, 3, 1, 5, 1, 1, 35, 67, 12, 17, 70, 122, 111, 217, 218, 297, 212, 380, 308, 384, 351, 481, 295, 117, 86, 2, 4, 1, 3]), 'errors_histogram': ([-2.470034122467041, -2.3203350847417656, -2.1706360470164907, -2.0209370092912153, -1.8712379715659402, -1.721538933840665, -1.5718398961153897, -1.4221408583901145, -1.2724418206648394, -1.1227427829395642, -0.973043745214289, -0.8233447074890137, -0.6736456697637385, -0.5239466320384634, -0.374247594313188, -0.22454855658791306, -0.07484951886263769, 0.07484951886263769, 0.22454855658791262, 0.374247594313188, 0.5239466320384629, 0.6736456697637383, 0.8233447074890137, 0.9730437452142886, 1.122742782939564, 1.2724418206648394, 1.4221408583901143, 1.5718398961153897, 1.721538933840665, 1.8712379715659404, 2.020937009291215, 2.1706360470164903, 2.3203350847417656, 2.470034122467041], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 208, 3466, 127, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]), 'r2': 0.9698517706056425, 'mean_err': -2.5947964598644678e-18, 'sq_errors_histogram': ([0.0, 0.18488086564095532, 0.36976173128191064, 0.554642596922866, 0.7395234625638213, 0.9244043282047766, 1.109285193845732, 1.2941660594866873, 1.4790469251276426, 1.6639277907685979, 1.8488086564095532, 2.0336895220505085, 2.218570387691464, 2.403451253332419, 2.5883321189733746, 2.7732129846143296, 2.958093850255285, 3.1429747158962407, 3.3278555815371957, 3.5127364471781513, 3.6976173128191063, 3.882498178460062, 4.067379044101017, 4.252259909741972, 4.437140775382928, 4.622021641023883, 4.806902506664838, 4.991783372305794, 5.176664237946749, 5.361545103587704, 5.546425969228659, 5.731306834869615, 5.91618770051057, 6.101068566151525], [3808, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]), 'rmse': 0.04718546358520561, 'mean_abs_err': 0.034776442063205966, 'obs_histogram': ([0.3016003370285034, 0.36731045173876214, 0.43302056644902087, 0.49873068115927954, 0.5644407958695383, 0.630150910579797, 0.6958610252900557, 0.7615711400003145, 0.8272812547105731, 0.8929913694208318, 0.9587014841310906, 1.0244115988413491, 1.090121713551608, 1.1558318282618667, 1.2215419429721255, 1.2872520576823843, 1.3529621723926428, 1.4186722871029016, 1.4843824018131602, 1.550092516523419, 1.6158026312336777, 1.6815127459439363, 1.747222860654195, 1.8129329753644539, 1.8786430900747124, 1.9443532047849712, 2.01006331949523, 2.0757734342054888, 2.1414835489157475, 2.207193663626006, 2.272903778336265, 2.3386138930465235, 2.4043240077567822, 2.470034122467041], [2, 0, 0, 3, 5, 0, 2, 5, 8, 10, 21, 26, 44, 39, 73, 111, 130, 164, 200, 265, 296, 339, 367, 377, 393, 357, 305, 159, 82, 13, 7, 2, 3]), 'explained_variance': 0.07162423631230161, 'mre': 0.034776442063205966, 'mrae': 0.021167219422600428, 'abs_errors_histogram': ([0.0, 0.0748495188626376, 0.1496990377252752, 0.2245485565879128, 0.2993980754505504, 0.374247594313188, 0.4490971131758256, 0.5239466320384633, 0.5987961509011008, 0.6736456697637384, 0.748495188626376, 0.8233447074890137, 0.8981942263516512, 0.9730437452142888, 1.0478932640769265, 1.122742782939564, 1.1975923018022017, 1.2724418206648394, 1.3472913395274768, 1.4221408583901145, 1.496990377252752, 1.5718398961153897, 1.6466894149780273, 1.7215389338406648, 1.7963884527033025, 1.8712379715659402, 1.9460874904285776, 2.0209370092912153, 2.095786528153853, 2.1706360470164907, 2.245485565879128, 2.3203350847417656, 2.3951846036044033, 2.470034122467041], [3466, 298, 37, 6, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0])}, 'randomized_rec_eval': {'preds_histogram': ([0.0, 0.16666666666666666, 0.3333333333333333, 0.5, 0.6666666666666666, 0.8333333333333333, 1.0, 1.1666666666666665, 1.3333333333333333, 1.5, 1.6666666666666665, 1.8333333333333333, 2.0, 2.1666666666666665, 2.333333333333333, 2.5, 2.6666666666666665, 2.833333333333333, 3.0, 3.1666666666666665, 3.333333333333333, 3.5, 3.6666666666666665, 3.833333333333333, 4.0, 4.166666666666666, 4.333333333333333, 4.5, 4.666666666666666, 4.833333333333333, 5.0, 5.166666666666666, 5.333333333333333, 5.5], [0, 21, 620, 4353, 1140, 3920, 8349, 9025, 19621, 47473, 87719, 108525, 136956, 209836, 332612, 479804, 632295, 783153, 909682, 984081, 994903, 938544, 826422, 674487, 500329, 335416, 202092, 111529, 57587, 27557, 13128, 6195, 2941]), 'errors_histogram': ([-5.5, -5.166666666666667, -4.833333333333333, -4.5, -4.166666666666667, -3.8333333333333335, -3.5, -3.166666666666667, -2.8333333333333335, -2.5, -2.166666666666667, -1.8333333333333335, -1.5, -1.166666666666667, -0.8333333333333339, -0.5, -0.16666666666666696, 0.16666666666666607, 0.5, 0.833333333333333, 1.166666666666666, 1.5, 1.833333333333333, 2.166666666666666, 2.5, 2.833333333333332, 3.166666666666666, 3.5, 3.833333333333332, 4.166666666666666, 4.5, 4.833333333333332, 5.166666666666666, 5.5], [0, 0, 0, 1, 17, 346, 2387, 7517, 30583, 69449, 117518, 296890, 522085, 980195, 1347187, 2140328, 1530020, 1166578, 751216, 316501, 112476, 39968, 15556, 4307, 1590, 237, 23, 2, 0, 0, 0, 0, 0]), 'r2': -0.7611161631054737, 'mean_err': -0.29987442957281213, 'sq_errors_histogram': ([0.0, 0.9166666666666666, 1.8333333333333333, 2.75, 3.6666666666666665, 4.583333333333333, 5.5, 6.416666666666666, 7.333333333333333, 8.25, 9.166666666666666, 10.083333333333332, 11.0, 11.916666666666666, 12.833333333333332, 13.75, 14.666666666666666, 15.583333333333332, 16.5, 17.416666666666664, 18.333333333333332, 19.25, 20.166666666666664, 21.083333333333332, 22.0, 22.916666666666664, 23.833333333333332, 24.75, 25.666666666666664, 26.583333333333332, 27.5, 28.416666666666664, 29.333333333333332, 30.25], [7526700, 1127901, 397929, 196640, 80393, 50407, 35580, 19850, 8509, 4038, 2388, 1410, 698, 345, 117, 53, 13, 4, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]), 'rmse': 0.7853630720512603, 'mean_abs_err': 0.6122747979449047, 'obs_histogram': ([0.0, 0.16666666666666666, 0.3333333333333333, 0.5, 0.6666666666666666, 0.8333333333333333, 1.0, 1.1666666666666665, 1.3333333333333333, 1.5, 1.6666666666666665, 1.8333333333333333, 2.0, 2.1666666666666665, 2.333333333333333, 2.5, 2.6666666666666665, 2.833333333333333, 3.0, 3.1666666666666665, 3.333333333333333, 3.5, 3.6666666666666665, 3.833333333333333, 4.0, 4.166666666666666, 4.333333333333333, 4.5, 4.666666666666666, 4.833333333333333, 5.0, 5.166666666666666, 5.333333333333333, 5.5], [0, 0, 76, 117, 168, 603, 1682, 2651, 5597, 11293, 20972, 36260, 59083, 92370, 143610, 224013, 337793, 485440, 654496, 820947, 962326, 1055896, 1078917, 1015282, 859904, 649273, 436099, 258825, 134822, 61398, 26133, 10346, 3906]), 'explained_variance': 0.5013512941027207, 'mre': 0.6122747979449048, 'mrae': 0.17158621275210365, 'abs_errors_histogram': ([0.0, 0.16666666666666666, 0.3333333333333333, 0.5, 0.6666666666666666, 0.8333333333333333, 1.0, 1.1666666666666665, 1.3333333333333333, 1.5, 1.6666666666666665, 1.8333333333333333, 2.0, 2.1666666666666665, 2.333333333333333, 2.5, 2.6666666666666665, 2.833333333333333, 3.0, 3.1666666666666665, 3.333333333333333, 3.5, 3.6666666666666665, 3.833333333333333, 4.0, 4.166666666666666, 4.333333333333333, 4.5, 4.666666666666666, 4.833333333333333, 5.0, 5.166666666666666, 5.333333333333333, 5.5], [1530020, 1760675, 1546231, 1131565, 966838, 757404, 539292, 386208, 248353, 194791, 142067, 81802, 51272, 40872, 32884, 21659, 10514, 4938, 2816, 1663, 747, 278, 70, 14, 3, 1, 0, 0, 0, 0, 0, 0, 0])}, 'replaced_mean_error_baseline': 0.06460098802615538, 'replaced_rec_eval': {'preds_histogram': ([0.0, 0.16666666666666666, 0.3333333333333333, 0.5, 0.6666666666666666, 0.8333333333333333, 1.0, 1.1666666666666665, 1.3333333333333333, 1.5, 1.6666666666666665, 1.8333333333333333, 2.0, 2.1666666666666665, 2.333333333333333, 2.5, 2.6666666666666665, 2.833333333333333, 3.0, 3.1666666666666665, 3.333333333333333, 3.5, 3.6666666666666665, 3.833333333333333, 4.0, 4.166666666666666, 4.333333333333333, 4.5, 4.666666666666666, 4.833333333333333, 5.0, 5.166666666666666, 5.333333333333333, 5.5], [0, 0, 65, 130, 154, 526, 1677, 2478, 4653, 8877, 18181, 32695, 51938, 78962, 125204, 197936, 303543, 438033, 595676, 764638, 924989, 1044617, 1104550, 1068501, 930698, 718674, 489321, 288826, 148176, 65489, 27161, 10178, 3818]), 'errors_histogram': ([-5.5, -5.166666666666667, -4.833333333333333, -4.5, -4.166666666666667, -3.8333333333333335, -3.5, -3.166666666666667, -2.8333333333333335, -2.5, -2.166666666666667, -1.8333333333333335, -1.5, -1.166666666666667, -0.8333333333333339, -0.5, -0.16666666666666696, 0.16666666666666607, 0.5, 0.833333333333333, 1.166666666666666, 1.5, 1.833333333333333, 2.166666666666666, 2.5, 2.833333333333332, 3.166666666666666, 3.5, 3.833333333333332, 4.166666666666666, 4.5, 4.833333333333332, 5.166666666666666, 5.5], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 183, 62014, 9104278, 286492, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]), 'r2': 0.9813366771253169, 'mean_err': 0.04328850664257445, 'sq_errors_histogram': ([0.0, 0.9166666666666666, 1.8333333333333333, 2.75, 3.6666666666666665, 4.583333333333333, 5.5, 6.416666666666666, 7.333333333333333, 8.25, 9.166666666666666, 10.083333333333332, 11.0, 11.916666666666666, 12.833333333333332, 13.75, 14.666666666666666, 15.583333333333332, 16.5, 17.416666666666664, 18.333333333333332, 19.25, 20.166666666666664, 21.083333333333332, 22.0, 22.916666666666664, 23.833333333333332, 24.75, 25.666666666666664, 26.583333333333332, 27.5, 28.416666666666664, 29.333333333333332, 30.25], [9452977, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]), 'rmse': 0.08084831258527896, 'mean_abs_err': 0.06460098802615401, 'obs_histogram': ([0.0, 0.16666666666666666, 0.3333333333333333, 0.5, 0.6666666666666666, 0.8333333333333333, 1.0, 1.1666666666666665, 1.3333333333333333, 1.5, 1.6666666666666665, 1.8333333333333333, 2.0, 2.1666666666666665, 2.333333333333333, 2.5, 2.6666666666666665, 2.833333333333333, 3.0, 3.1666666666666665, 3.333333333333333, 3.5, 3.6666666666666665, 3.833333333333333, 4.0, 4.166666666666666, 4.333333333333333, 4.5, 4.666666666666666, 4.833333333333333, 5.0, 5.166666666666666, 5.333333333333333, 5.5], [0, 0, 76, 117, 168, 603, 1682, 2651, 5597, 11293, 20972, 36260, 59083, 92370, 143610, 224013, 337793, 485440, 654496, 820947, 962326, 1055896, 1078917, 1015282, 859904, 649273, 436099, 258825, 134822, 61398, 26133, 10346, 3906]), 'explained_variance': 0.34378613192817686, 'mre': 0.06460098802615401, 'mrae': 0.01839034803638792, 'abs_errors_histogram': ([0.0, 0.16666666666666666, 0.3333333333333333, 0.5, 0.6666666666666666, 0.8333333333333333, 1.0, 1.1666666666666665, 1.3333333333333333, 1.5, 1.6666666666666665, 1.8333333333333333, 2.0, 2.1666666666666665, 2.333333333333333, 2.5, 2.6666666666666665, 2.833333333333333, 3.0, 3.1666666666666665, 3.333333333333333, 3.5, 3.6666666666666665, 3.833333333333333, 4.0, 4.166666666666666, 4.333333333333333, 4.5, 4.666666666666666, 4.833333333333333, 5.0, 5.166666666666666, 5.333333333333333, 5.5], [9104278, 347469, 1037, 187, 6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0])}, 'regression_evaluation_ht': {'preds_histogram': ([0.3016003370285034, 0.36731045173876214, 0.43302056644902087, 0.49873068115927954, 0.5644407958695383, 0.630150910579797, 0.6958610252900557, 0.7615711400003145, 0.8272812547105731, 0.8929913694208318, 0.9587014841310906, 1.0244115988413491, 1.090121713551608, 1.1558318282618667, 1.2215419429721255, 1.2872520576823843, 1.3529621723926428, 1.4186722871029016, 1.4843824018131602, 1.550092516523419, 1.6158026312336777, 1.6815127459439363, 1.747222860654195, 1.8129329753644539, 1.8786430900747124, 1.9443532047849712, 2.01006331949523, 2.0757734342054888, 2.1414835489157475, 2.207193663626006, 2.272903778336265, 2.3386138930465235, 2.4043240077567822, 2.470034122467041], [2, 0, 0, 3, 5, 0, 2, 5, 8, 10, 21, 26, 44, 39, 73, 111, 130, 164, 200, 265, 296, 339, 367, 377, 393, 357, 305, 159, 82, 13, 7, 2, 3]), 'errors_histogram': ([-2.470034122467041, -2.3203350847417656, -2.1706360470164907, -2.0209370092912153, -1.8712379715659402, -1.721538933840665, -1.5718398961153897, -1.4221408583901145, -1.2724418206648394, -1.1227427829395642, -0.973043745214289, -0.8233447074890137, -0.6736456697637385, -0.5239466320384634, -0.374247594313188, -0.22454855658791306, -0.07484951886263769, 0.07484951886263769, 0.22454855658791262, 0.374247594313188, 0.5239466320384629, 0.6736456697637383, 0.8233447074890137, 0.9730437452142886, 1.122742782939564, 1.2724418206648394, 1.4221408583901143, 1.5718398961153897, 1.721538933840665, 1.8712379715659404, 2.020937009291215, 2.1706360470164903, 2.3203350847417656, 2.470034122467041], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3808, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]), 'r2': 1.0, 'mean_err': 0.0, 'sq_errors_histogram': ([0.0, 0.18488086564095532, 0.36976173128191064, 0.554642596922866, 0.7395234625638213, 0.9244043282047766, 1.109285193845732, 1.2941660594866873, 1.4790469251276426, 1.6639277907685979, 1.8488086564095532, 2.0336895220505085, 2.218570387691464, 2.403451253332419, 2.5883321189733746, 2.7732129846143296, 2.958093850255285, 3.1429747158962407, 3.3278555815371957, 3.5127364471781513, 3.6976173128191063, 3.882498178460062, 4.067379044101017, 4.252259909741972, 4.437140775382928, 4.622021641023883, 4.806902506664838, 4.991783372305794, 5.176664237946749, 5.361545103587704, 5.546425969228659, 5.731306834869615, 5.91618770051057, 6.101068566151525], [3808, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]), 'rmse': 0.0, 'mean_abs_err': 0.0, 'obs_histogram': ([0.3016003370285034, 0.36731045173876214, 0.43302056644902087, 0.49873068115927954, 0.5644407958695383, 0.630150910579797, 0.6958610252900557, 0.7615711400003145, 0.8272812547105731, 0.8929913694208318, 0.9587014841310906, 1.0244115988413491, 1.090121713551608, 1.1558318282618667, 1.2215419429721255, 1.2872520576823843, 1.3529621723926428, 1.4186722871029016, 1.4843824018131602, 1.550092516523419, 1.6158026312336777, 1.6815127459439363, 1.747222860654195, 1.8129329753644539, 1.8786430900747124, 1.9443532047849712, 2.01006331949523, 2.0757734342054888, 2.1414835489157475, 2.207193663626006, 2.272903778336265, 2.3386138930465235, 2.4043240077567822, 2.470034122467041], [2, 0, 0, 3, 5, 0, 2, 5, 8, 10, 21, 26, 44, 39, 73, 111, 130, 164, 200, 265, 296, 339, 367, 377, 393, 357, 305, 159, 82, 13, 7, 2, 3]), 'explained_variance': 0.07385070428605225, 'mre': 0.0, 'mrae': 0.0, 'abs_errors_histogram': ([0.0, 0.0748495188626376, 0.1496990377252752, 0.2245485565879128, 0.2993980754505504, 0.374247594313188, 0.4490971131758256, 0.5239466320384633, 0.5987961509011008, 0.6736456697637384, 0.748495188626376, 0.8233447074890137, 0.8981942263516512, 0.9730437452142888, 1.0478932640769265, 1.122742782939564, 1.1975923018022017, 1.2724418206648394, 1.3472913395274768, 1.4221408583901145, 1.496990377252752, 1.5718398961153897, 1.6466894149780273, 1.7215389338406648, 1.7963884527033025, 1.8712379715659402, 1.9460874904285776, 2.0209370092912153, 2.095786528153853, 2.1706360470164907, 2.245485565879128, 2.3203350847417656, 2.3951846036044033, 2.470034122467041], [3808, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0])}, 'regression_evaluation_test': {'preds_histogram': ([0.2532430589199066, 0.3204185456940622, 0.3875940324682178, 0.4547695192423734, 0.5219450060165289, 0.5891204927906846, 0.6562959795648402, 0.7234714663389958, 0.7906469531131514, 0.857822439887307, 0.9249979266614625, 0.9921734134356182, 1.0593489002097738, 1.1265243869839292, 1.193699873758085, 1.2608753605322405, 1.328050847306396, 1.3952263340805517, 1.4624018208547074, 1.5295773076288628, 1.5967527944030184, 1.663928281177174, 1.7311037679513297, 1.7982792547254853, 1.865454741499641, 1.9326302282737964, 1.999805715047952, 2.0669812018221076, 2.1341566885962635, 2.201332175370419, 2.2685076621445743, 2.33568314891873, 2.4028586356928856, 2.470034122467041], [0, 0, 0, 0, 1, 3, 0, 0, 1, 0, 11, 4, 16, 5, 43, 49, 40, 52, 64, 108, 154, 122, 165, 199, 157, 191, 139, 49, 50, 1, 5, 0, 2]), 'errors_histogram': ([-2.470034122467041, -2.3203350847417656, -2.1706360470164907, -2.0209370092912153, -1.8712379715659402, -1.721538933840665, -1.5718398961153897, -1.4221408583901145, -1.2724418206648394, -1.1227427829395642, -0.973043745214289, -0.8233447074890137, -0.6736456697637385, -0.5239466320384634, -0.374247594313188, -0.22454855658791306, -0.07484951886263769, 0.07484951886263769, 0.22454855658791262, 0.374247594313188, 0.5239466320384629, 0.6736456697637383, 0.8233447074890137, 0.9730437452142886, 1.122742782939564, 1.2724418206648394, 1.4221408583901143, 1.5718398961153897, 1.721538933840665, 1.8712379715659404, 2.020937009291215, 2.1706360470164903, 2.3203350847417656, 2.470034122467041], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 5, 7, 145, 1306, 148, 15, 1, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]), 'r2': 0.9058568018991721, 'mean_err': 0.004675788055511255, 'sq_errors_histogram': ([0.0, 0.18488086564095532, 0.36976173128191064, 0.554642596922866, 0.7395234625638213, 0.9244043282047766, 1.109285193845732, 1.2941660594866873, 1.4790469251276426, 1.6639277907685979, 1.8488086564095532, 2.0336895220505085, 2.218570387691464, 2.403451253332419, 2.5883321189733746, 2.7732129846143296, 2.958093850255285, 3.1429747158962407, 3.3278555815371957, 3.5127364471781513, 3.6976173128191063, 3.882498178460062, 4.067379044101017, 4.252259909741972, 4.437140775382928, 4.622021641023883, 4.806902506664838, 4.991783372305794, 5.176664237946749, 5.361545103587704, 5.546425969228659, 5.731306834869615, 5.91618770051057, 6.101068566151525], [1625, 5, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]), 'rmse': 0.08171076219942955, 'mean_abs_err': 0.05231938157256162, 'obs_histogram': ([0.2532430589199066, 0.3204185456940622, 0.3875940324682178, 0.4547695192423734, 0.5219450060165289, 0.5891204927906846, 0.6562959795648402, 0.7234714663389958, 0.7906469531131514, 0.857822439887307, 0.9249979266614625, 0.9921734134356182, 1.0593489002097738, 1.1265243869839292, 1.193699873758085, 1.2608753605322405, 1.328050847306396, 1.3952263340805517, 1.4624018208547074, 1.5295773076288628, 1.5967527944030184, 1.663928281177174, 1.7311037679513297, 1.7982792547254853, 1.865454741499641, 1.9326302282737964, 1.999805715047952, 2.0669812018221076, 2.1341566885962635, 2.201332175370419, 2.2685076621445743, 2.33568314891873, 2.4028586356928856, 2.470034122467041], [1, 0, 0, 2, 0, 2, 1, 2, 1, 3, 3, 7, 15, 20, 31, 33, 43, 72, 80, 105, 129, 157, 160, 153, 180, 173, 140, 70, 35, 8, 2, 2, 1]), 'explained_variance': 0.06651565038386766, 'mre': 0.05231938157256162, 'mrae': 0.03436323575066559, 'abs_errors_histogram': ([0.0, 0.0748495188626376, 0.1496990377252752, 0.2245485565879128, 0.2993980754505504, 0.374247594313188, 0.4490971131758256, 0.5239466320384633, 0.5987961509011008, 0.6736456697637384, 0.748495188626376, 0.8233447074890137, 0.8981942263516512, 0.9730437452142888, 1.0478932640769265, 1.122742782939564, 1.1975923018022017, 1.2724418206648394, 1.3472913395274768, 1.4221408583901145, 1.496990377252752, 1.5718398961153897, 1.6466894149780273, 1.7215389338406648, 1.7963884527033025, 1.8712379715659402, 1.9460874904285776, 2.0209370092912153, 2.095786528153853, 2.1706360470164907, 2.245485565879128, 2.3203350847417656, 2.3951846036044033, 2.470034122467041], [1306, 227, 66, 14, 8, 5, 1, 3, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0])}, 'model': 'regression_tree', 'replaced_rec_eval_test': {'preds_histogram': ([0.0, 0.16666666666666666, 0.3333333333333333, 0.5, 0.6666666666666666, 0.8333333333333333, 1.0, 1.1666666666666665, 1.3333333333333333, 1.5, 1.6666666666666665, 1.8333333333333333, 2.0, 2.1666666666666665, 2.333333333333333, 2.5, 2.6666666666666665, 2.833333333333333, 3.0, 3.1666666666666665, 3.333333333333333, 3.5, 3.6666666666666665, 3.833333333333333, 4.0, 4.166666666666666, 4.333333333333333, 4.5, 4.666666666666666, 4.833333333333333, 5.0, 5.166666666666666, 5.333333333333333, 5.5], [0, 0, 24, 59, 58, 160, 582, 854, 1440, 2546, 5208, 10021, 17469, 30466, 52283, 83438, 122240, 167216, 218392, 278962, 341367, 392714, 422528, 403653, 341880, 255101, 167831, 96263, 49208, 22345, 9580, 3693, 1543]), 'errors_histogram': ([-5.5, -5.166666666666667, -4.833333333333333, -4.5, -4.166666666666667, -3.8333333333333335, -3.5, -3.166666666666667, -2.8333333333333335, -2.5, -2.166666666666667, -1.8333333333333335, -1.5, -1.166666666666667, -0.8333333333333339, -0.5, -0.16666666666666696, 0.16666666666666607, 0.5, 0.833333333333333, 1.166666666666666, 1.5, 1.833333333333333, 2.166666666666666, 2.5, 2.833333333333332, 3.166666666666666, 3.5, 3.833333333333332, 4.166666666666666, 4.5, 4.833333333333332, 5.166666666666666, 5.5], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 161, 174, 13786, 3170547, 302434, 12656, 469, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]), 'r2': 0.9632930449036622, 'mean_err': 0.06718156477688722, 'sq_errors_histogram': ([0.0, 0.9166666666666666, 1.8333333333333333, 2.75, 3.6666666666666665, 4.583333333333333, 5.5, 6.416666666666666, 7.333333333333333, 8.25, 9.166666666666666, 10.083333333333332, 11.0, 11.916666666666666, 12.833333333333332, 13.75, 14.666666666666666, 15.583333333333332, 16.5, 17.416666666666664, 18.333333333333332, 19.25, 20.166666666666664, 21.083333333333332, 22.0, 22.916666666666664, 23.833333333333332, 24.75, 25.666666666666664, 26.583333333333332, 27.5, 28.416666666666664, 29.333333333333332, 30.25], [3500187, 41, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]), 'rmse': 0.10982176122521489, 'mean_abs_err': 0.08359846354323132, 'obs_histogram': ([0.0, 0.16666666666666666, 0.3333333333333333, 0.5, 0.6666666666666666, 0.8333333333333333, 1.0, 1.1666666666666665, 1.3333333333333333, 1.5, 1.6666666666666665, 1.8333333333333333, 2.0, 2.1666666666666665, 2.333333333333333, 2.5, 2.6666666666666665, 2.833333333333333, 3.0, 3.1666666666666665, 3.333333333333333, 3.5, 3.6666666666666665, 3.833333333333333, 4.0, 4.166666666666666, 4.333333333333333, 4.5, 4.666666666666666, 4.833333333333333, 5.0, 5.166666666666666, 5.333333333333333, 5.5], [0, 0, 27, 58, 71, 162, 518, 952, 1763, 3231, 6734, 12531, 22007, 37891, 62369, 95084, 136009, 184959, 243278, 307432, 368844, 413193, 422884, 385643, 309623, 218970, 135277, 73255, 34587, 14441, 5394, 1908, 679]), 'explained_variance': 0.34040601479339905, 'mre': 0.08359846354323132, 'mrae': 0.023843692437647192, 'abs_errors_histogram': ([0.0, 0.16666666666666666, 0.3333333333333333, 0.5, 0.6666666666666666, 0.8333333333333333, 1.0, 1.1666666666666665, 1.3333333333333333, 1.5, 1.6666666666666665, 1.8333333333333333, 2.0, 2.1666666666666665, 2.333333333333333, 2.5, 2.6666666666666665, 2.833333333333333, 3.0, 3.1666666666666665, 3.333333333333333, 3.5, 3.6666666666666665, 3.833333333333333, 4.0, 4.166666666666666, 4.333333333333333, 4.5, 4.666666666666666, 4.833333333333333, 5.0, 5.166666666666666, 5.333333333333333, 5.5], [3170547, 290334, 25886, 9097, 3733, 611, 19, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0])}}}
2017-05-17 16:00:17,473 - __main__ - DEBUG - Training the average rating model
2017-05-17 16:00:38,155 - __main__ - DEBUG - Done in 20.682873 seconds
2017-05-17 16:00:38,185 - __main__ - DEBUG - Loading /home/maxikov/product_regression_all_regression_tree_rank_1_depth_8.state/als_model.pkl
2017-05-17 16:00:40,740 - __main__ - DEBUG - Loading /home/maxikov/product_regression_all_regression_tree_rank_1_depth_8.state/baseline_predictions.pkl
