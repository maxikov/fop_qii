spark-submit --driver-memory 15g MovieLensALS.py --spark-executor-memory 15g --local-threads 8 --num-partitions 7 --checkpoint-dir /home/maxikov/spark_dir --temp-dir /home/maxikov/spark_dir --persist-dir /home/maxikov/product_regression_all_regression_tree_rank_3_depth_4.state --data-path datasets/ml-20m --movies-file datasets/ml-20m/ml-20m.imdb.medium.csv --tvtropes-file datasets/dbtropes/tropes.csv --rank 3 --lmbda 0.01 --num-iter 300 --predict-product-features --metadata-sources years genres average_rating imdb_keywords imdb_producer imdb_director tags tvtropes --drop-rare-features 250 --drop-rare-movies 50 --cross-validation 70 --regression-model regression_tree --nbins 16 --max-depth 4 --features-trim-percentile 0
2017-05-18 13:43:48,912 - __main__ - DEBUG - rank: 3, lmbda: 0.01, num_iter: 300, num_partitions: 7
2017-05-18 13:43:48,912 - __main__ - DEBUG - data_path: datasets/ml-20m, checkpoint_dir: /home/maxikov/spark_dir
2017-05-18 13:43:48,912 - __main__ - DEBUG - Temp dir: /home/maxikov/spark_dir
2017-05-18 13:43:48,912 - __main__ - DEBUG - local_threads: 8
2017-05-18 13:43:48,912 - __main__ - DEBUG - spark_executor_memory: 15g
2017-05-18 13:43:48,912 - __main__ - DEBUG - regression_model: regression_tree
2017-05-18 13:43:48,913 - __main__ - DEBUG - nbins: 16
2017-05-18 13:43:48,913 - __main__ - DEBUG - regression_users: False
2017-05-18 13:43:48,913 - __main__ - DEBUG - predict_product_features: True
2017-05-18 13:43:48,913 - __main__ - DEBUG - metadata_sources: ['years', 'genres', 'average_rating', 'imdb_keywords', 'imdb_producer', 'imdb_director', 'tags', 'tvtropes']
2017-05-18 13:43:48,913 - __main__ - DEBUG - movies_file: datasets/ml-20m/ml-20m.imdb.medium.csv
2017-05-18 13:43:48,913 - __main__ - DEBUG - cross_validation: 70
2017-05-18 13:43:48,913 - __main__ - DEBUG - tvtropes_file: datasets/dbtropes/tropes.csv
2017-05-18 13:43:48,913 - __main__ - DEBUG - features_trim_percentile: 0
2017-05-18 13:43:48,913 - __main__ - DEBUG - drop_missing_movies: False
2017-05-18 13:43:48,913 - __main__ - DEBUG - drop_rare_features: 250
2017-05-18 13:43:48,913 - __main__ - DEBUG - filter_data_set: 10
2017-05-18 13:43:48,913 - __main__ - DEBUG - persist_dir: /home/maxikov/product_regression_all_regression_tree_rank_3_depth_4.state, override_args: False
2017-05-18 13:43:48,913 - __main__ - DEBUG - drop_rare_movies: 50
2017-05-18 13:43:48,913 - __main__ - DEBUG - normalize: False
2017-05-18 13:43:48,913 - __main__ - DEBUG - max_depth: 4
2017-05-18 13:43:48,913 - __main__ - DEBUG - /home/maxikov/product_regression_all_regression_tree_rank_3_depth_4.state/args.pkl not found, loading new
2017-05-18 13:43:48,914 - __main__ - DEBUG - Storing in /home/maxikov/product_regression_all_regression_tree_rank_3_depth_4.state/args.pkl
2017-05-18 13:43:50,456 - __main__ - DEBUG - msep: ,
2017-05-18 13:43:50,456 - __main__ - DEBUG - Loading ratings
2017-05-18 13:44:03,024 - __main__ - DEBUG - Done in 12.567956 seconds
2017-05-18 13:44:03,024 - __main__ - DEBUG - Loading movies
2017-05-18 13:44:04,649 - __main__ - DEBUG - Done in 1.624825 seconds
2017-05-18 13:44:04,649 - __main__ - DEBUG - 26804 movies loaded
2017-05-18 13:45:11,688 - __main__ - DEBUG - 19912669 records in the training set
2017-05-18 13:45:19,943 - __main__ - DEBUG - 26284 unique movies in the training set
2017-05-18 13:45:19,943 - __main__ - DEBUG - Started internal_feature_predictor
2017-05-18 13:45:19,944 - __main__ - DEBUG - Trying to load previous results
2017-05-18 13:45:19,944 - __main__ - DEBUG - /home/maxikov/product_regression_all_regression_tree_rank_3_depth_4.state/results.pkl not found
2017-05-18 13:45:19,944 - __main__ - DEBUG - Training the average rating model
2017-05-18 13:45:40,467 - __main__ - DEBUG - Done in 20.523482 seconds
2017-05-18 13:45:40,492 - __main__ - DEBUG - Loading /home/maxikov/product_regression_all_regression_tree_rank_3_depth_4.state/als_model.pkl
2017-05-18 13:45:43,663 - __main__ - DEBUG - /home/maxikov/product_regression_all_regression_tree_rank_3_depth_4.state/baseline_predictions.pkl not found, building new predictions
2017-05-18 13:45:43,663 - __main__ - DEBUG - Computing model predictions
2017-05-18 13:45:56,498 - __main__ - DEBUG - Done in 12.834533 seconds
2017-05-18 13:45:56,498 - __main__ - DEBUG - Computing mean error
2017-05-18 13:52:57,716 - __main__ - DEBUG - Done in 421.217834 seconds
2017-05-18 13:52:57,716 - __main__ - DEBUG - Mean error: 0.607021941621, RMSE: 0.792012890142
2017-05-18 13:52:57,746 - __main__ - DEBUG - Original recommender Evaluating the model
2017-05-18 13:52:57,798 - __main__ - DEBUG - Original recommender Bin range: (0.0, 5.5)
