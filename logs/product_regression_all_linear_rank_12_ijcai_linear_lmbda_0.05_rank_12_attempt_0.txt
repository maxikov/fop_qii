spark-submit --driver-memory 64g MovieLensALS.py --spark-executor-memory 64g --local-threads 40 --num-partitions 40 --checkpoint-dir archived_states/spark_dir --temp-dir archived_states/spark_dir --persist-dir archived_states/product_regression_all_linear_rank_12_ijcai_linear_lmbda_0.05_rank_12.state --csv --data-path datasets/ml-20m --movies-file datasets/ml-20m/ml-20m.imdb.set1.csv --tvtropes-file datasets/dbtropes/tropes.csv --rank 12 --lmbda 0.05 --num-iter 300 --predict-product-features --metadata-sources years genres average_rating imdb_keywords imdb_producer imdb_director tvtropes tags imdb_year imdb_rating imdb_cast imdb_cinematographer imdb_composer imdb_languages imdb_production_companies imdb_writer --drop-rare-features 250 --drop-rare-movies 25 --cross-validation 70 --regression-model linear --nbins 32 --max-depth 5 --normalize --features-trim-percentile 0 --no-ht --filter-data-set 10 --als-cross-validation 1000
2018-01-29 16:20:37,909 - __main__ - DEBUG - rank: 12, lmbda: 0.05, num_iter: 300, num_partitions: 40
2018-01-29 16:20:37,909 - __main__ - DEBUG - data_path: datasets/ml-20m, checkpoint_dir: archived_states/spark_dir
2018-01-29 16:20:37,909 - __main__ - DEBUG - Temp dir: archived_states/spark_dir
2018-01-29 16:20:37,909 - __main__ - DEBUG - local_threads: 40
2018-01-29 16:20:37,909 - __main__ - DEBUG - spark_executor_memory: 64g
2018-01-29 16:20:37,909 - __main__ - DEBUG - cold_start: 0
2018-01-29 16:20:37,909 - __main__ - DEBUG - regression_model: linear
2018-01-29 16:20:37,910 - __main__ - DEBUG - nbins: 32
2018-01-29 16:20:37,910 - __main__ - DEBUG - regression_users: False
2018-01-29 16:20:37,910 - __main__ - DEBUG - predict_product_features: True
2018-01-29 16:20:37,910 - __main__ - DEBUG - metadata_sources: ['years', 'genres', 'average_rating', 'imdb_keywords', 'imdb_producer', 'imdb_director', 'tvtropes', 'tags', 'imdb_year', 'imdb_rating', 'imdb_cast', 'imdb_cinematographer', 'imdb_composer', 'imdb_languages', 'imdb_production_companies', 'imdb_writer']
2018-01-29 16:20:37,910 - __main__ - DEBUG - movies_file: datasets/ml-20m/ml-20m.imdb.set1.csv
2018-01-29 16:20:37,910 - __main__ - DEBUG - cross_validation: 70
2018-01-29 16:20:37,910 - __main__ - DEBUG - tvtropes_file: datasets/dbtropes/tropes.csv
2018-01-29 16:20:37,910 - __main__ - DEBUG - features_trim_percentile: 0
2018-01-29 16:20:37,910 - __main__ - DEBUG - drop_missing_movies: False
2018-01-29 16:20:37,910 - __main__ - DEBUG - drop_rare_features: 250
2018-01-29 16:20:37,910 - __main__ - DEBUG - filter_data_set: 10
2018-01-29 16:20:37,910 - __main__ - DEBUG - persist_dir: archived_states/product_regression_all_linear_rank_12_ijcai_linear_lmbda_0.05_rank_12.state, override_args: False
2018-01-29 16:20:37,910 - __main__ - DEBUG - drop_rare_movies: 25
2018-01-29 16:20:37,910 - __main__ - DEBUG - normalize: True
2018-01-29 16:20:37,910 - __main__ - DEBUG - max_depth: 5
2018-01-29 16:20:37,910 - __main__ - DEBUG - no_ht: True
2018-01-29 16:20:37,910 - __main__ - DEBUG - csv: True
2018-01-29 16:20:39,764 - __main__ - DEBUG - msep: ,
2018-01-29 16:20:39,764 - __main__ - DEBUG - Loading ratings
2018-01-29 16:20:47,786 - __main__ - DEBUG - Done in 8.022208 seconds
2018-01-29 16:20:47,787 - __main__ - DEBUG - Loading movies
2018-01-29 16:20:50,202 - __main__ - DEBUG - Done in 2.415442 seconds
2018-01-29 16:20:50,202 - __main__ - DEBUG - 26804 movies loaded
2018-01-29 16:21:04,186 - __main__ - DEBUG - 19912669 records in the training set
2018-01-29 16:21:07,680 - __main__ - DEBUG - 26284 unique movies in the training set
2018-01-29 16:21:07,680 - __main__ - DEBUG - Started internal_feature_predictor
2018-01-29 16:21:07,680 - __main__ - DEBUG - Trying to load previous results
2018-01-29 16:21:07,680 - __main__ - DEBUG - Loading archived_states/product_regression_all_linear_rank_12_ijcai_linear_lmbda_0.05_rank_12.state/results.pkl
2018-01-29 16:21:07,880 - __main__ - DEBUG - 12 features already processed
2018-01-29 16:21:07,880 - __main__ - DEBUG - Training the average rating model
2018-01-29 16:21:12,286 - __main__ - DEBUG - Done in 4.405540 seconds
2018-01-29 16:21:12,552 - __main__ - DEBUG - Trying to get 1000 pairs for cross-validation
2018-01-29 16:21:12,553 - __main__ - DEBUG - Counting nusers per each movie
2018-01-29 16:21:14,473 - __main__ - DEBUG - 26284 movies found
2018-01-29 16:21:14,476 - __main__ - DEBUG - 22408 movies with more than one user found
2018-01-29 16:21:14,476 - __main__ - DEBUG - Counting nmovies per each user
2018-01-29 16:21:28,802 - __main__ - DEBUG - 19912669 user-movie pairs in the data set
2018-01-29 16:22:11,317 - __main__ - DEBUG - 138493 users found
2018-01-29 16:22:11,328 - __main__ - DEBUG - 138493 users with more than one movie found
2018-01-29 16:22:25,025 - __main__ - DEBUG - 19908793 user-movie pairs left after filtering
